%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% Programming/Coding Assignment
% LaTeX Template
%
% This template has been downloaded from:
% http://www.latextemplates.com
%
% Original author:
% Ted Pavlic (http://www.tedpavlic.com)
%
% Note:
% The \lipsum[#] commands throughout this template generate dummy text
% to fill the template out. These commands should all be removed when 
% writing assignment content.
%
% This template uses a Perl script as an example snippet of code, most other
% languages are also usable. Configure them in the "CODE INCLUSION 
% CONFIGURATION" section.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND OTHER DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[a4paper, 12pt, openany]{book}

%%% Работа с русским языком % для pdfLatex
\usepackage{cmap}					% поиск в~PDF
\usepackage{mathtext} 				% русские буквы в~фомулах
\usepackage[T2A]{fontenc}			% кодировка
\usepackage[utf8]{inputenc}			% кодировка исходного текста
\usepackage[english,russian]{babel}	% локализация и переносы
\usepackage{indentfirst} 			% отступ 1 абзаца
%%% ------------------------------------------

\usepackage{fancyhdr} % Required for custom headers
\usepackage{lastpage} % Required to determine the last page for the footer
\usepackage{extramarks} % Required for headers and footers
\usepackage[usenames,dvipsnames]{color} % Required for custom colors
\usepackage{graphicx} % Required to insert images
\usepackage{listings} % Required for insertion of code
\usepackage{courier} % Required for the courier font
\usepackage{lipsum} % Used for inserting dummy 'Lorem ipsum' text into the template

% Margins
\topmargin=-0.45in
\evensidemargin=0in
\oddsidemargin=0in
\textwidth=6.5in
\textheight=9.0in
\headsep=0.25in

\linespread{1.1} % Line spacing

\def\chaptername{Лекция} % Семинар вместо главы
\setcounter{tocdepth}{1} % Глубина отображения в оглавлении


\makeatletter % Убирает нумерацию на страницах, где \chapter
\renewcommand\chapter{\if@openright\cleardoublepage\else\clearpage\fi
	\thispagestyle{empty}% original style: plain
	\global\@topnum\z@
	\@afterindentfalse
	\secdef\@chapter\@schapter}
\makeatother

% Set up the header and footer
\fancypagestyle{pl}{
	\fancyhead{}
	\renewcommand\headrulewidth{0.4pt} % Size of the header rule
	\renewcommand\footrulewidth{0.4pt} % Size of the footer rule
	\lhead{\leftmark} % Top left header
	%\fancyhead[CO, CE]{\leftmark} % Top center head
	\fancyhead[RO, RE]{\rightmark} % Top right header
	\lfoot{\lastxmark} % Bottom left footer
	\cfoot{} % Bottom center footer
	\rfoot{\Author} % Bottom right footer
	\setlength\parindent{0pt} % Removes all indentation from paragraphs
}
\pagestyle{pl}



%----------------------------------------------------------------------------------------
%	CODE INCLUSION CONFIGURATION
%----------------------------------------------------------------------------------------

\definecolor{MyDarkGreen}{rgb}{0.0,0.4,0.0} % This is the color used for comments
\definecolor{infa}{rgb}{0, 0.2, 0.89}
\lstloadlanguages{Perl, Python, C++} % Load  syntax for listings, for a list of other languages supported see: ftp://ftp.tex.ac.uk/tex-archive/macros/latex/contrib/listings/listings.pdf
\lstset{language=C++, % Use  in this example
        frame=single, % Single frame around code
        basicstyle=\ttfamily\footnotesize, % Use small true type font
        keywordstyle=[1]\color{infa}\bf, %  functions bold and blue
        keywordstyle=[2]\color{Purple}, %  function arguments purple
        keywordstyle=[3]\color{Blue}\underbar, % Custom functions underlined and bl\ttfamilyue
        identifierstyle=, % Nothing special about identifiers                                         
        commentstyle=\usefont{T1}{pcr}{m}{sl}\color{MyDarkGreen}\small, % Comments small dark green courier fontarchive
        stringstyle=\color{Purple}, % Strings are purple
        showstringspaces=false, % Don't put marks in string spaces
        tabsize=5, % 5 spaces per tab
        %
        % Put standard  functions not included in the default language here
        morekeywords={rand},
        %
        % Put  function parameters here
        morekeywords=[2]{on, off, interp},
        %
        % Put user defined functions here
        morekeywords=[3]{test},
       	%
        morecomment=[l][\color{Blue}]{...}, % Line continuation (...) like blue comment
        numbers=left, % Line numbers on left
        firstnumber=1, % Line numbers start with line 1
        numberstyle=\color{Gray}, % Line numbers are blue and small
        stepnumber=1 % Line numbers go in steps of 5
}

% Структура блока для кода C++. Менять при необходимости
% 1 аргумент - путь файла. 2 аргумент - описание. 3 аргумент - метка (label)
\newcommand{\cppfile}[3]{
	\renewcommand\lstlistingname{Код}
	\renewcommand{\lstlistlistingname}{Код}
	\def\lstlistingautorefname{Alg.}
	
	\begin{itemize}
		\item[]\lstinputlisting[caption=#2,label={#3}, language=C++]{#1.cpp}
	\end{itemize}	
}